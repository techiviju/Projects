<%@page import="com.hms.entity.Doctor"%>
<%@page import="com.hms.db.DBConnection"%>
<%@page import="com.hms.dao.DoctorDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="jakarta.tags.core"%>
<%@page isELIgnored="false"%>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Doctor Dashboard</title>
    <%@include file="../component/allcss.jsp"%>
</head>
<body>
    <%@include file="navbar.jsp"%>
    
    <!-- Check if doctor is logged in -->
    <c:if test="${empty doctorObj }">
        <c:redirect url="../doctor_login.jsp"></c:redirect>
    </c:if>
    
    <div class="container p-4">
        <div class="row">
            <div class="col-md-12">
                <h2 class="text-success text-center">Doctor Dashboard</h2>
                <%
                    Doctor currentLoginDoctor = (Doctor) session.getAttribute("doctorObj");
                %>
                <h4 class="text-secondary text-center">Welcome, ${doctorObj.fullName}</h4>
            </div>
        </div>
        
        <div class="row g-4 mt-3 d-flex justify-content-center">
            <div class="col-md-4">
                <div class="card my-card p-3">
                    <div class="card-body text-center">
                        <i class="fa-solid fa-calendar-check fa-3x text-success"></i>
                        <h4 class="mt-3">Total Appointments</h4>
                        <%
                            DoctorDAO docDAO = new DoctorDAO(DBConnection.getConn());
                        %>
                        <h5 class="fs-1">
                            <%= docDAO.countTotalAppointmentByDoctorId(currentLoginDoctor.getId()) %>
                        </h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>