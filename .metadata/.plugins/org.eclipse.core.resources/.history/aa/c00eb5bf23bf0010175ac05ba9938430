<%@page import="com.hms.dao.*"%>
<%@page import="com.hms.entity.*"%>
<%@page import="com.hms.db.DBConnection"%>
<%@page import="java.util.*"%>
<%@ taglib prefix="c" uri="jakarta.tags.core"%>
<%@page isELIgnored="false"%>
<!DOCTYPE html>
<html>
<head>
<title>Patient Details</title>
<%@include file="../component/allcss.jsp"%>
<link rel="stylesheet" href="../component/theme.css">
</head>
<body>
<%@ include file="../component/navbar.jsp" %>


<div class="container py-5">
  <div class="card my-card">
    <div class="card-body">
      <h3 class="text-center page-title mb-3">Patient Details</h3>

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Full Name</th><th>Gender</th><th>Age</th><th>Date</th>
            <th>Email</th><th>Phone</th><th>Diseases</th>
            <th>Doctor</th><th>Address</th><th>Status</th>
          </tr>
        </thead>
        <tbody>
        <%
          AppointmentDAO appDAO = new AppointmentDAO(DBConnection.getConn());
          DoctorDAO docDAO = new DoctorDAO(DBConnection.getConn());
          List<Appointment> list = appDAO.getAllAppointment();
          for(Appointment app : list){
            Doctor doc = docDAO.getDoctorById(app.getDoctorId());
        %>
          <tr>
            <td><%=app.getFullName()%></td>
            <td><%=app.getGender()%></td>
            <td><%=app.getAge()%></td>
            <td><%=app.getAppointmentDate()%></td>
            <td><%=app.getEmail()%></td>
            <td><%=app.getPhone()%></td>
            <td><%=app.getDiseases()%></td>
            <td><%=doc.getFullName()%></td>
            <td><%=app.getAddress()%></td>
            <td><%=app.getStatus()%></td>
          </tr>
        <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>

</body>
</html>
